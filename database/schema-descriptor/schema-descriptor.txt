TABLE abuse_flags
`id` int NOT NULL AUTO_INCREMENT
`user_id` int NOT NULL
`catalog_item_id` int NOT NULL
`merchant_item_id` int unsigned DEFAULT NULL
`name` text
`note` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `reports_merchant_item_id_index` (`merchant_item_id`)

TABLE account_balances
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`party_id` bigint unsigned NOT NULL
`counterparty_id` bigint unsigned NOT NULL
`balance_type` enum('receivable','payable') COLLATE utf8mb4_unicode_ci NOT NULL
`total_amount` decimal(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Total outstanding balance'
`pending_amount` decimal(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Amount pending collection/settlement'
`settled_amount` decimal(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Amount already settled'
`monetary_unit_code` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'SAR'
`transaction_count` int unsigned NOT NULL DEFAULT '0'
`last_transaction_at` timestamp NULL DEFAULT NULL
`last_calculated_at` timestamp NULL DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `unique_balance` (`party_id`,`counterparty_id`,`balance_type`)
KEY `account_balances_party_id_balance_type_index` (`party_id`,`balance_type`)
KEY `account_balances_counterparty_id_balance_type_index` (`counterparty_id`,`balance_type`)
CONSTRAINT `account_balances_counterparty_id_foreign` FOREIGN KEY (`counterparty_id`) REFERENCES `account_parties` (`id`) ON DELETE CASCADE
CONSTRAINT `account_balances_party_id_foreign` FOREIGN KEY (`party_id`) REFERENCES `account_parties` (`id`) ON DELETE CASCADE

TABLE account_parties
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`party_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL
`reference_type` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Source table: users, couriers, shippings, etc'
`reference_id` bigint unsigned DEFAULT NULL COMMENT 'ID in source table'
`name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL
`code` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Unique code: platform, merchant_5, courier_12, shipping_tryoto'
`email` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`phone` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_active` tinyint(1) NOT NULL DEFAULT '1'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `account_parties_code_unique` (`code`)
KEY `account_parties_party_type_index` (`party_type`)
KEY `account_parties_reference_type_reference_id_index` (`reference_type`,`reference_id`)
KEY `account_parties_is_active_index` (`is_active`)

TABLE accounting_ledger
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`transaction_ref` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Unique transaction reference: TXN-20260113-XXXXX'
`purchase_id` bigint unsigned DEFAULT NULL
`merchant_purchase_id` bigint unsigned DEFAULT NULL
`from_party_id` bigint unsigned NOT NULL
`to_party_id` bigint unsigned NOT NULL
`amount` decimal(12,2) NOT NULL
`monetary_unit_code` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'SAR'
`transaction_type` enum('debt','collection','settlement','fee','refund','reversal','adjustment') COLLATE utf8mb4_unicode_ci NOT NULL
`entry_type` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Specific entry type: SALE_REVENUE, COMMISSION_EARNED, TAX_COLLECTED, etc.'
`direction` enum('DEBIT','CREDIT') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'CREDIT'
`description` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`description_ar` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`metadata` json DEFAULT NULL COMMENT 'Additional data: payment_method, tracking_number, etc'
`status` enum('pending','completed','cancelled') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending'
`debt_status` enum('PENDING','SETTLED','CANCELLED','REVERSED') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'PENDING'
`original_entry_id` bigint unsigned DEFAULT NULL
`transaction_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
`settled_at` timestamp NULL DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
`created_by` bigint unsigned DEFAULT NULL
`settled_by` bigint unsigned DEFAULT NULL
`settlement_batch_id` bigint unsigned DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `accounting_ledger_transaction_ref_unique` (`transaction_ref`)
KEY `accounting_ledger_purchase_id_index` (`purchase_id`)
KEY `accounting_ledger_merchant_purchase_id_index` (`merchant_purchase_id`)
KEY `accounting_ledger_transaction_type_index` (`transaction_type`)
KEY `accounting_ledger_status_index` (`status`)
KEY `accounting_ledger_transaction_date_index` (`transaction_date`)
KEY `accounting_ledger_from_party_id_to_party_id_index` (`from_party_id`,`to_party_id`)
KEY `accounting_ledger_to_party_id_from_party_id_index` (`to_party_id`,`from_party_id`)
KEY `accounting_ledger_settlement_batch_id_foreign` (`settlement_batch_id`)
KEY `accounting_ledger_original_entry_id_foreign` (`original_entry_id`)
KEY `accounting_ledger_entry_type_index` (`entry_type`)
KEY `accounting_ledger_debt_status_index` (`debt_status`)
KEY `accounting_ledger_direction_index` (`direction`)
CONSTRAINT `accounting_ledger_from_party_id_foreign` FOREIGN KEY (`from_party_id`) REFERENCES `account_parties` (`id`) ON DELETE RESTRICT
CONSTRAINT `accounting_ledger_original_entry_id_foreign` FOREIGN KEY (`original_entry_id`) REFERENCES `accounting_ledger` (`id`) ON DELETE SET NULL
CONSTRAINT `accounting_ledger_settlement_batch_id_foreign` FOREIGN KEY (`settlement_batch_id`) REFERENCES `settlement_batches` (`id`) ON DELETE SET NULL
CONSTRAINT `accounting_ledger_to_party_id_foreign` FOREIGN KEY (`to_party_id`) REFERENCES `account_parties` (`id`) ON DELETE RESTRICT

TABLE announcements
`id` int NOT NULL AUTO_INCREMENT
`photo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`link` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`type` enum('Large','TopSmall','BottomSmall') NOT NULL
`name` varchar(255) DEFAULT NULL
`text` varchar(255) DEFAULT NULL
PRIMARY KEY (`id`)

TABLE api_credentials
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`service_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`key_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`encrypted_value` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`is_active` tinyint(1) NOT NULL DEFAULT '1'
`expires_at` timestamp NULL DEFAULT NULL
`last_used_at` timestamp NULL DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `api_credentials_service_key_unique` (`service_name`,`key_name`)
KEY `api_credentials_service_name_index` (`service_name`)

TABLE article_types
`id` int NOT NULL AUTO_INCREMENT
`name` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`slug` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
PRIMARY KEY (`id`)

TABLE brand_regions
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`brand_id` bigint unsigned NOT NULL
`code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`label_en` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`label_ar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `brand_id` (`brand_id`)
CONSTRAINT `brand_regions_ibfk_1` FOREIGN KEY (`brand_id`) REFERENCES `brands` (`id`) ON DELETE CASCADE
CONSTRAINT `fk_brand_regions_brand_id` FOREIGN KEY (`brand_id`) REFERENCES `brands` (`id`)

TABLE brands
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`photo` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`name` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`name_ar` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_featured` int DEFAULT NULL
`status` tinyint(1) NOT NULL DEFAULT '1'
`slug` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL
PRIMARY KEY (`id`)

TABLE buyer_notes
`id` int NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL
`catalog_item_id` int unsigned DEFAULT NULL
`merchant_item_id` int unsigned DEFAULT NULL
`text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00'
`updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
PRIMARY KEY (`id`)

TABLE callouts
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`illustration_id` bigint unsigned DEFAULT NULL
`callout_type` enum('part','hardware','section','basic') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`callout_key` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`applicable` tinyint(1) DEFAULT '0'
`selective_fit` tinyint(1) DEFAULT '0'
`rectangle_top` int DEFAULT NULL
`rectangle_left` int DEFAULT NULL
`rectangle_right` int DEFAULT NULL
`rectangle_bottom` int DEFAULT NULL
PRIMARY KEY (`id`)
KEY `illustration_id` (`illustration_id`)
CONSTRAINT `fk_callouts_illustration_id` FOREIGN KEY (`illustration_id`) REFERENCES `illustrations` (`id`)

TABLE catalog_events
`id` int NOT NULL AUTO_INCREMENT
`purchase_id` int unsigned DEFAULT NULL
`user_id` int DEFAULT NULL
`merchant_id` int DEFAULT NULL
`catalog_item_id` int DEFAULT NULL
`chat_thread_id` int unsigned DEFAULT NULL
`is_read` tinyint(1) NOT NULL DEFAULT '0'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE catalog_item_code_mappings
`id` int unsigned NOT NULL AUTO_INCREMENT
`item_code` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL
`catalog_item_id` int unsigned DEFAULT NULL
`quality_brand_id` bigint unsigned NOT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uq_catalog_item_code_mappings_item_code` (`item_code`)
KEY `idx_catalog_item_code_mappings_catalog_item` (`catalog_item_id`)
KEY `idx_catalog_item_code_mappings_brand_quality` (`quality_brand_id`)
CONSTRAINT `fk_catalog_item_code_mappings_brand_quality` FOREIGN KEY (`quality_brand_id`) REFERENCES `quality_brands` (`id`)
CONSTRAINT `fk_catalog_item_code_mappings_catalog_item` FOREIGN KEY (`catalog_item_id`) REFERENCES `catalog_items` (`id`)

TABLE catalog_item_fitments
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`catalog_item_id` int unsigned DEFAULT NULL
`catalog_id` bigint unsigned NOT NULL
`brand_id` bigint unsigned NOT NULL
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
`updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
KEY `catalog_id` (`catalog_id`)
KEY `brand_id` (`brand_id`)
KEY `fk_fitments_catalog_items` (`catalog_item_id`)
CONSTRAINT `fk_fitments_brands` FOREIGN KEY (`brand_id`) REFERENCES `brands` (`id`) ON DELETE RESTRICT ON UPDATE CASCADE
CONSTRAINT `fk_fitments_catalog_items` FOREIGN KEY (`catalog_item_id`) REFERENCES `catalog_items` (`id`) ON DELETE RESTRICT ON UPDATE CASCADE
CONSTRAINT `fk_fitments_catalogs` FOREIGN KEY (`catalog_id`) REFERENCES `catalogs` (`id`) ON DELETE RESTRICT ON UPDATE CASCADE

TABLE catalog_items
`id` int unsigned NOT NULL AUTO_INCREMENT
`part_number` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`weight` decimal(10,2) DEFAULT '1.00'
`label_en` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`label_ar` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`attributes` text COLLATE utf8mb4_unicode_ci
`name` text COLLATE utf8mb4_unicode_ci NOT NULL
`slug` text COLLATE utf8mb4_unicode_ci
`photo` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT 'LargePNG/SVG/noimage.png'
`thumbnail` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT 'SmallPNG/SVG/noimage.png'
`views` int unsigned NOT NULL DEFAULT '0'
`tags` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_meta` tinyint NOT NULL DEFAULT '0'
`meta_tag` text COLLATE utf8mb4_unicode_ci
`meta_description` text COLLATE utf8mb4_unicode_ci
`youtube` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`measure` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`hot` tinyint unsigned NOT NULL DEFAULT '0'
`latest` tinyint unsigned NOT NULL DEFAULT '0'
`sale` tinyint NOT NULL DEFAULT '0'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
`cross_items` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uq_part_number` (`part_number`) USING BTREE
KEY `idx_catalog_items_part_number` (`part_number`) USING BTREE
FULLTEXT KEY `name` (`name`)
FULLTEXT KEY `attributes` (`attributes`)

TABLE catalog_reviews
`id` int NOT NULL AUTO_INCREMENT
`user_id` int NOT NULL
`catalog_item_id` int unsigned DEFAULT NULL
`merchant_item_id` int unsigned DEFAULT NULL
`review` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`rating` tinyint NOT NULL
`review_date` datetime NOT NULL
PRIMARY KEY (`id`)
KEY `catalog_reviews_catalog_item_id_index` (`catalog_item_id`)
KEY `catalog_reviews_merchant_item_id_index` (`merchant_item_id`)

TABLE catalogs
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`new_id` int DEFAULT '0'
`code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`brand_id` bigint unsigned DEFAULT NULL
`brand_region_id` bigint unsigned DEFAULT NULL
`label_en` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`label_ar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`name_ar` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`slug` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`public_id` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`sort` int DEFAULT '0'
`status` tinyint NOT NULL DEFAULT '1'
`beginDate` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`endDate` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`beginYear` int NOT NULL
`endYear` int NOT NULL
`dateRangeDescription` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`vehicleType` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`shortName` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`hasNotes` tinyint(1) DEFAULT NULL
`models` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`hasModels` tinyint(1) DEFAULT NULL
`imagePath` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`largeImagePath` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `code` (`code`)
KEY `brand_id` (`brand_id`)
KEY `brand_region_id` (`brand_region_id`)
CONSTRAINT `catalogs_ibfk_1` FOREIGN KEY (`brand_id`) REFERENCES `brands` (`id`) ON DELETE SET NULL
CONSTRAINT `catalogs_ibfk_2` FOREIGN KEY (`brand_region_id`) REFERENCES `brand_regions` (`id`) ON DELETE SET NULL
CONSTRAINT `fk_catalogs_brand_id` FOREIGN KEY (`brand_id`) REFERENCES `brands` (`id`)
CONSTRAINT `fk_catalogs_brand_region_id` FOREIGN KEY (`brand_region_id`) REFERENCES `brand_regions` (`id`)

TABLE category_periods
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`category_id` bigint unsigned NOT NULL
`begin_date` date DEFAULT NULL
`end_date` date DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uq_category_period` (`category_id`,`begin_date`,`end_date`)
KEY `idx_cp_category_dates` (`category_id`,`begin_date`,`end_date`)
CONSTRAINT `category_periods_ibfk_1` FOREIGN KEY (`category_id`) REFERENCES `newcategories` (`id`) ON DELETE CASCADE

TABLE category_spec_group_items
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`group_id` bigint unsigned NOT NULL
`specification_item_id` int unsigned NOT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uniq_group_item` (`group_id`,`specification_item_id`)
KEY `specification_item_id` (`specification_item_id`)
KEY `idx_csgi_group_spec` (`group_id`,`specification_item_id`)
CONSTRAINT `category_spec_group_items_ibfk_1` FOREIGN KEY (`group_id`) REFERENCES `category_spec_groups` (`id`) ON DELETE CASCADE
CONSTRAINT `category_spec_group_items_ibfk_2` FOREIGN KEY (`specification_item_id`) REFERENCES `specification_items` (`id`) ON DELETE CASCADE

TABLE category_spec_groups
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`category_id` bigint unsigned NOT NULL
`catalog_id` bigint unsigned NOT NULL
`group_index` int unsigned DEFAULT '0'
`category_period_id` bigint unsigned DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uniq_cat_spec_group` (`category_id`,`catalog_id`,`group_index`,`category_period_id`)
KEY `catalog_id` (`catalog_id`)
KEY `category_period_id` (`category_period_id`)
KEY `idx_csg_category_catalog` (`category_id`,`catalog_id`)
CONSTRAINT `category_spec_groups_ibfk_1` FOREIGN KEY (`category_id`) REFERENCES `newcategories` (`id`) ON DELETE CASCADE
CONSTRAINT `category_spec_groups_ibfk_2` FOREIGN KEY (`catalog_id`) REFERENCES `catalogs` (`id`) ON DELETE CASCADE
CONSTRAINT `category_spec_groups_ibfk_3` FOREIGN KEY (`category_period_id`) REFERENCES `category_periods` (`id`) ON DELETE SET NULL

TABLE chat_entries
`id` int NOT NULL AUTO_INCREMENT
`chat_thread_id` int unsigned DEFAULT NULL
`message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`sent_user` int DEFAULT NULL
`recieved_user` int DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE chat_threads
`id` int NOT NULL AUTO_INCREMENT
`subject` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`sent_user` int NOT NULL
`recieved_user` int NOT NULL
`message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE cities
`id` bigint NOT NULL AUTO_INCREMENT
`city_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL
`status` tinyint NOT NULL DEFAULT '0'
`country_id` int NOT NULL
`latitude` decimal(10,8) DEFAULT NULL
`longitude` decimal(11,8) DEFAULT NULL
`tryoto_supported` tinyint(1) NOT NULL DEFAULT '0'
PRIMARY KEY (`id`)
KEY `cities_country_id_tryoto_supported_index` (`country_id`,`tryoto_supported`)
KEY `cities_latitude_longitude_index` (`latitude`,`longitude`)

TABLE comms_blueprints
`id` int NOT NULL AUTO_INCREMENT
`email_type` varchar(255) CHARACTER SET utf8mb3 COLLATE utf8mb3_unicode_ci DEFAULT NULL
`email_subject` mediumtext CHARACTER SET utf8mb3 COLLATE utf8mb3_unicode_ci
`email_body` longtext CHARACTER SET utf8mb3 COLLATE utf8mb3_unicode_ci
`status` int NOT NULL DEFAULT '1'
PRIMARY KEY (`id`)

TABLE connect_configs
`id` int unsigned NOT NULL AUTO_INCREMENT
`facebook` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`gplus` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`twitter` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`linkedin` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`dribble` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`f_status` tinyint NOT NULL DEFAULT '1'
`g_status` tinyint NOT NULL DEFAULT '1'
`t_status` tinyint NOT NULL DEFAULT '1'
`l_status` tinyint NOT NULL DEFAULT '1'
`d_status` tinyint NOT NULL DEFAULT '1'
`f_check` tinyint DEFAULT NULL
`g_check` tinyint DEFAULT NULL
`fclient_id` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`fclient_secret` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`fredirect` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`gclient_id` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`gclient_secret` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`gredirect` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
PRIMARY KEY (`id`)

TABLE countries
`id` int NOT NULL AUTO_INCREMENT
`country_code` varchar(2) NOT NULL DEFAULT ''
`country_name` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL DEFAULT ''
`country_name_ar` varchar(100) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL
`tax` double NOT NULL DEFAULT '0'
`status` int NOT NULL DEFAULT '0'
`is_synced` tinyint(1) NOT NULL DEFAULT '0'
`synced_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE courier_service_areas
`id` bigint NOT NULL AUTO_INCREMENT
`courier_id` int DEFAULT NULL
`city_id` int DEFAULT NULL
`latitude` decimal(10,7) DEFAULT NULL
`longitude` decimal(10,7) DEFAULT NULL
`service_radius_km` int unsigned NOT NULL DEFAULT '20' COMMENT 'Service radius in kilometers'
`price` double NOT NULL DEFAULT '0'
`status` int NOT NULL DEFAULT '1'
PRIMARY KEY (`id`)
KEY `courier_service_areas_coordinates_index` (`latitude`,`longitude`)

TABLE couriers
`id` bigint NOT NULL AUTO_INCREMENT
`name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`photo` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`email_verify` enum('Yes','No') CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT 'No'
`phone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`email_token` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`status` int DEFAULT NULL
`balance` double DEFAULT '0'
`total_collected` decimal(12,2) NOT NULL DEFAULT '0.00'
`total_delivered` decimal(12,2) NOT NULL DEFAULT '0.00'
`total_fees_earned` decimal(12,2) NOT NULL DEFAULT '0.00'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE delivery_couriers
`id` bigint NOT NULL AUTO_INCREMENT
`purchase_id` int DEFAULT NULL
`merchant_id` int DEFAULT NULL
`courier_id` int DEFAULT NULL
`merchant_branch_id` int DEFAULT NULL
`service_area_id` int DEFAULT NULL
`status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL
`delivery_fee` decimal(10,2) NOT NULL DEFAULT '0.00'
`cod_amount` decimal(10,2) NOT NULL DEFAULT '0.00'
`purchase_amount` decimal(10,2) NOT NULL DEFAULT '0.00'
`payment_method` enum('online','cod') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'cod'
`fee_status` enum('pending','paid','collected') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'pending'
`settlement_status` enum('pending','settled') COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'pending'
`delivered_at` timestamp NULL DEFAULT NULL
`approved_at` timestamp NULL DEFAULT NULL
`ready_at` timestamp NULL DEFAULT NULL
`picked_up_at` timestamp NULL DEFAULT NULL
`confirmed_at` timestamp NULL DEFAULT NULL
`customer_confirmed` tinyint(1) NOT NULL DEFAULT '0'
`settled_at` timestamp NULL DEFAULT NULL
`notes` text COLLATE utf8mb4_general_ci
`rejection_reason` text COLLATE utf8mb4_general_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE failed_jobs
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`uuid` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`connection` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`queue` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`payload` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`exception` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`failed_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
UNIQUE KEY `failed_jobs_uuid_unique` (`uuid`)

TABLE favorite_sellers
`id` int unsigned NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL
`catalog_item_id` int unsigned DEFAULT NULL
`merchant_item_id` int unsigned DEFAULT NULL
PRIMARY KEY (`id`)
KEY `favorites_catalog_item_id_index` (`catalog_item_id`)
KEY `favorites_merchant_item_id_index` (`merchant_item_id`)

TABLE frontend_settings
`id` int unsigned NOT NULL AUTO_INCREMENT
`contact_email` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`street` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`phone` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`fax` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`email` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`home` tinyint(1) NOT NULL DEFAULT '0'
`blog` tinyint(1) NOT NULL DEFAULT '0'
`faq` tinyint(1) NOT NULL DEFAULT '0'
`contact` tinyint(1) NOT NULL DEFAULT '0'
`category` tinyint(1) NOT NULL DEFAULT '0'
`newsletter` int NOT NULL DEFAULT '1'
PRIMARY KEY (`id`)

TABLE help_articles
`id` int unsigned NOT NULL AUTO_INCREMENT
`name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL
`details` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
PRIMARY KEY (`id`)

TABLE home_page_themes
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`slug` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`is_active` tinyint(1) NOT NULL DEFAULT '0'
`layout` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'default'
`show_hero_search` tinyint(1) NOT NULL DEFAULT '1'
`show_brands` tinyint(1) NOT NULL DEFAULT '1'
`show_categories` tinyint(1) NOT NULL DEFAULT '1'
`show_arrival` tinyint(1) NOT NULL DEFAULT '1'
`show_blogs` tinyint(1) NOT NULL DEFAULT '1'
`show_capabilities` tinyint(1) NOT NULL DEFAULT '1'
`show_newsletter` tinyint(1) NOT NULL DEFAULT '1'
`order_brands` int NOT NULL DEFAULT '2'
`order_categories` int NOT NULL DEFAULT '3'
`order_arrival` int NOT NULL DEFAULT '4'
`order_blogs` int NOT NULL DEFAULT '11'
`order_capabilities` int NOT NULL DEFAULT '12'
`order_newsletter` int NOT NULL DEFAULT '13'
`name_brands` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`name_categories` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`name_blogs` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`count_blogs` int NOT NULL DEFAULT '3'
`settings` json DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `home_page_themes_slug_unique` (`slug`)

TABLE illustrations
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`section_id` bigint unsigned DEFAULT NULL
`category_id` bigint unsigned DEFAULT NULL
`data_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`image_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uniq_illustration` (`section_id`,`category_id`,`code`,`data_code`)
KEY `category_id` (`category_id`)
KEY `idx_illustrations_section_code` (`section_id`,`code`)
CONSTRAINT `fk_illustrations_category` FOREIGN KEY (`category_id`) REFERENCES `newcategories` (`id`)
CONSTRAINT `fk_illustrations_section` FOREIGN KEY (`section_id`) REFERENCES `sections` (`id`)

TABLE languages
`id` int NOT NULL AUTO_INCREMENT
`is_default` tinyint(1) NOT NULL DEFAULT '0'
`language` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`file` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`name` varchar(100) NOT NULL
`rtl` tinyint(1) NOT NULL DEFAULT '0'
PRIMARY KEY (`id`)

TABLE mailing_list
`id` int NOT NULL AUTO_INCREMENT
`email` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
PRIMARY KEY (`id`)

TABLE merchant_branches
`id` bigint NOT NULL AUTO_INCREMENT
`user_id` int DEFAULT NULL
`branch_name` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL
`warehouse_name` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL
`tryoto_warehouse_code` varchar(50) COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT 'Warehouse Code from Tryoto dashboard'
`country_id` bigint unsigned DEFAULT NULL
`location` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL
`city_id` int unsigned DEFAULT NULL
`latitude` decimal(10,7) DEFAULT NULL
`longitude` decimal(10,7) DEFAULT NULL
`status` int NOT NULL DEFAULT '1'
PRIMARY KEY (`id`)
KEY `pickup_points_city_id_index` (`city_id`)
KEY `pickup_points_coordinates_index` (`latitude`,`longitude`)

TABLE merchant_commissions
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL
`fixed_commission` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'Fixed amount added to price'
`percentage_commission` decimal(5,2) NOT NULL DEFAULT '0.00' COMMENT 'Percentage markup on price'
`is_active` tinyint(1) NOT NULL DEFAULT '1'
`notes` text COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `merchant_commissions_user_id_unique` (`user_id`)
CONSTRAINT `merchant_commissions_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE

TABLE merchant_credentials
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL
`service_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'myfatoorah, tryoto, aramex'
`key_name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'api_key, secret_key, refresh_token'
`environment` enum('live','sandbox') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'live'
`encrypted_value` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`description` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_active` tinyint(1) NOT NULL DEFAULT '1'
`expires_at` timestamp NULL DEFAULT NULL
`last_used_at` timestamp NULL DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `merchant_service_key_env_unique` (`user_id`,`service_name`,`key_name`,`environment`)
KEY `merchant_credentials_user_id_index` (`user_id`)
KEY `merchant_credentials_service_name_index` (`service_name`)

TABLE merchant_items
`id` int unsigned NOT NULL AUTO_INCREMENT
`catalog_item_id` int unsigned NOT NULL
`user_id` int unsigned NOT NULL
`merchant_branch_id` bigint NOT NULL
`quality_brand_id` bigint unsigned DEFAULT NULL
`price` decimal(10,2) DEFAULT NULL
`previous_price` decimal(10,2) DEFAULT NULL
`stock` int DEFAULT NULL
`whole_sell_qty` text COLLATE utf8mb4_unicode_ci
`whole_sell_discount` text COLLATE utf8mb4_unicode_ci
`preordered` tinyint NOT NULL DEFAULT '0'
`minimum_qty` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`stock_check` int NOT NULL DEFAULT '0'
`status` tinyint unsigned NOT NULL DEFAULT '1'
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
`updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
`ship` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`item_condition` tinyint(1) NOT NULL DEFAULT '2'
`details` text COLLATE utf8mb4_unicode_ci
`policy` text COLLATE utf8mb4_unicode_ci
`item_type` enum('normal','affiliate') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'normal'
`affiliate_link` text COLLATE utf8mb4_unicode_ci
PRIMARY KEY (`id`)
UNIQUE KEY `uniq_catalog_item_user` (`catalog_item_id`,`user_id`,`merchant_branch_id`,`quality_brand_id`,`item_condition`)
KEY `fk_mi_user` (`user_id`)
KEY `mi_item_type` (`item_type`)
KEY `mi_branch_id_index` (`merchant_branch_id`)
KEY `idx_mi_quality_brand` (`quality_brand_id`)
CONSTRAINT `fk_mi_catalog_item` FOREIGN KEY (`catalog_item_id`) REFERENCES `catalog_items` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
CONSTRAINT `fk_mi_quality_brand` FOREIGN KEY (`quality_brand_id`) REFERENCES `quality_brands` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
CONSTRAINT `fk_mi_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
CONSTRAINT `merchant_items_merchant_branch_id_foreign` FOREIGN KEY (`merchant_branch_id`) REFERENCES `merchant_branches` (`id`) ON DELETE RESTRICT ON UPDATE CASCADE

TABLE merchant_payments
`id` int NOT NULL AUTO_INCREMENT
`operator` int NOT NULL DEFAULT '0'
`user_id` int NOT NULL DEFAULT '0'
`subtitle` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`title` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`topup` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`type` enum('manual','automatic') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT 'manual'
`information` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`keyword` varchar(191) DEFAULT NULL
`monetary_unit_id` varchar(191) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL DEFAULT '*'
`checkout` int NOT NULL DEFAULT '1'
`deposit` int NOT NULL DEFAULT '1'
`subscription` int NOT NULL DEFAULT '1'
`status` int NOT NULL DEFAULT '1'
PRIMARY KEY (`id`)

TABLE merchant_photos
`id` int unsigned NOT NULL AUTO_INCREMENT
`merchant_item_id` int unsigned NOT NULL
`photo` varchar(191) NOT NULL
`sort_order` int unsigned NOT NULL DEFAULT '0'
`is_primary` tinyint(1) NOT NULL DEFAULT '0'
`status` tinyint(1) NOT NULL DEFAULT '1'
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
`updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
KEY `fk_merchant_photos_merchant_item` (`merchant_item_id`)
CONSTRAINT `fk_merchant_photos_merchant_item` FOREIGN KEY (`merchant_item_id`) REFERENCES `merchant_items` (`id`) ON DELETE CASCADE

TABLE merchant_purchases
`id` int NOT NULL AUTO_INCREMENT
`user_id` int NOT NULL
`purchase_id` int NOT NULL
`cart` json DEFAULT NULL
`qty` int NOT NULL
`price` double NOT NULL
`commission_amount` decimal(10,2) NOT NULL DEFAULT '0.00'
`tax_amount` decimal(10,2) NOT NULL DEFAULT '0.00'
`shipping_cost` decimal(10,2) NOT NULL DEFAULT '0.00'
`courier_fee` decimal(10,2) NOT NULL DEFAULT '0.00'
`platform_shipping_fee` decimal(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Platform shipping fee (if shipping_owner_id = 0)'
`net_amount` decimal(10,2) NOT NULL DEFAULT '0.00'
`merchant_owes_platform` decimal(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Amount merchant owes platform (when merchant receives payment directly)'
`platform_owes_merchant` decimal(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Amount platform owes merchant (when platform receives payment)'
`courier_owes_platform` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'Amount courier owes to platform (if platform gateway)'
`shipping_company_owes_merchant` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'Amount shipping company owes to merchant (COD collected)'
`shipping_company_owes_platform` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'Amount shipping company owes to platform (if platform gateway)'
`cod_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'Total COD amount (purchase + delivery fee)'
`money_holder` enum('platform','merchant','courier','shipping_company','pending') NOT NULL DEFAULT 'pending' COMMENT 'Entity currently holding the payment'
`delivery_method` enum('local_courier','shipping_company','pickup','digital','none') DEFAULT NULL COMMENT 'How the order is delivered'
`delivery_provider` varchar(100) DEFAULT NULL COMMENT 'Specific provider: courier_id or tryoto/aramex/etc'
`collection_status` enum('not_applicable','pending','collected','failed') NOT NULL DEFAULT 'not_applicable' COMMENT 'COD collection status'
`collected_at` timestamp NULL DEFAULT NULL COMMENT 'When COD was collected'
`collected_by` varchar(100) DEFAULT NULL COMMENT 'Who collected COD (courier_id or shipping_company_name)'
`payment_type` enum('merchant','platform') NOT NULL DEFAULT 'platform'
`shipping_type` enum('merchant','platform','courier','pickup') DEFAULT NULL
`money_received_by` enum('merchant','platform','courier') NOT NULL DEFAULT 'platform'
`payment_owner_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Owner of payment gateway: 0=platform, else=merchant'
`shipping_owner_id` bigint unsigned NOT NULL DEFAULT '0' COMMENT 'Owner of shipping service: 0=platform, else=merchant'
`payment_method` varchar(20) DEFAULT NULL COMMENT 'Payment method: cod or online'
`payment_gateway_id` int unsigned DEFAULT NULL
`shipping_id` int unsigned DEFAULT NULL
`courier_id` int unsigned DEFAULT NULL
`merchant_branch_id` int unsigned DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
`purchase_number` varchar(191) NOT NULL
`status` enum('pending','processing','completed','declined','on delivery') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending'
`settlement_status` enum('unsettled','pending','settled') NOT NULL DEFAULT 'unsettled'
`settled_at` timestamp NULL DEFAULT NULL
`merchant_settlement_id` bigint unsigned DEFAULT NULL
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
KEY `mp_payment_owner_idx` (`payment_owner_id`)
KEY `mp_shipping_owner_idx` (`shipping_owner_id`)
KEY `mp_balance_idx` (`merchant_owes_platform`,`platform_owes_merchant`)
KEY `merchant_purchases_money_holder_index` (`money_holder`)
KEY `merchant_purchases_collection_status_index` (`collection_status`)
KEY `merchant_purchases_settlement_status_money_holder_index` (`settlement_status`,`money_holder`)

TABLE merchant_stock_updates
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL COMMENT 'Vendor user ID'
`file_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Uploaded file name'
`file_path` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Uploaded file path'
`update_type` enum('manual','automatic') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'manual'
`status` enum('pending','processing','completed','failed') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending'
`total_rows` int NOT NULL DEFAULT '0'
`updated_rows` int NOT NULL DEFAULT '0'
`failed_rows` int NOT NULL DEFAULT '0'
`error_log` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`started_at` timestamp NULL DEFAULT NULL
`completed_at` timestamp NULL DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `merchant_stock_updates_user_id_index` (`user_id`)
KEY `merchant_stock_updates_status_index` (`status`)
KEY `merchant_stock_updates_update_type_index` (`update_type`)

TABLE merchant_tax_settings
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL
`tax_rate` decimal(5,2) NOT NULL DEFAULT '0.00'
`tax_number` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`tax_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'VAT'
`is_active` tinyint(1) NOT NULL DEFAULT '1'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `merchant_tax_settings_user_id_unique` (`user_id`)
KEY `merchant_tax_settings_user_id_index` (`user_id`)

TABLE migrations
`id` int unsigned NOT NULL AUTO_INCREMENT
`migration` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`batch` int NOT NULL
PRIMARY KEY (`id`)

TABLE modules
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`keyword` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`type` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`uninstall_files` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE monetary_units
`id` int NOT NULL AUTO_INCREMENT
`name` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`sign` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`value` double NOT NULL
`is_default` tinyint(1) NOT NULL DEFAULT '0'
PRIMARY KEY (`id`)

TABLE muaadhsettings
`id` bigint NOT NULL AUTO_INCREMENT
`logo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`favicon` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`site_name` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`loader` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL
`admin_loader` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_talkto` tinyint(1) NOT NULL DEFAULT '1'
`talkto` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`currency_format` tinyint(1) NOT NULL DEFAULT '0'
`withdraw_fee` double NOT NULL DEFAULT '0'
`withdraw_charge` double NOT NULL DEFAULT '0'
`mail_driver` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`mail_host` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`mail_port` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`mail_encryption` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`mail_user` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`mail_pass` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`from_email` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`from_name` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_buyer_note` tinyint(1) NOT NULL DEFAULT '1'
`is_currency` tinyint(1) NOT NULL DEFAULT '1'
`is_affilate` tinyint(1) NOT NULL DEFAULT '1'
`affilate_charge` int NOT NULL DEFAULT '0'
`affilate_banner` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`reg_merchant` tinyint(1) NOT NULL DEFAULT '0'
`copyright` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_admin_loader` tinyint(1) NOT NULL DEFAULT '0'
`is_verification_email` tinyint(1) NOT NULL DEFAULT '0'
`wholesell` int NOT NULL DEFAULT '0'
`is_capcha` tinyint(1) NOT NULL DEFAULT '0'
`capcha_secret_key` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`capcha_site_key` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`error_banner_404` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`error_banner_500` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_popup` tinyint(1) NOT NULL DEFAULT '0'
`popup_background` text COLLATE utf8mb4_unicode_ci
`invoice_logo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`user_image` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_report` tinyint(1) NOT NULL
`footer_logo` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`is_maintain` tinyint(1) NOT NULL DEFAULT '0'
`maintain_text` text COLLATE utf8mb4_unicode_ci
`verify_item` tinyint(1) NOT NULL DEFAULT '0'
`page_count` int NOT NULL DEFAULT '0'
`favorite_count` int NOT NULL DEFAULT '0'
`is_debug` tinyint(1) NOT NULL DEFAULT '0'
`decimal_separator` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`thousand_separator` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`is_cookie` tinyint(1) NOT NULL DEFAULT '0'
`facebook_pixel` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)

TABLE network_presences
`id` int NOT NULL AUTO_INCREMENT
`user_id` int NOT NULL DEFAULT '0'
`link` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`icon` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`status` tinyint(1) NOT NULL DEFAULT '1'
PRIMARY KEY (`id`)

TABLE newcategories
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`brand_id` bigint unsigned NOT NULL
`brand_region_id` bigint unsigned NOT NULL
`catalog_id` bigint unsigned NOT NULL
`parent_id` bigint unsigned DEFAULT NULL
`level` tinyint unsigned NOT NULL
`spec_key` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`parents_key` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`full_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`formatted_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`slug` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`Applicability` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`label_en` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`label_ar` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`thumbnail` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`images` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`keywords` text COLLATE utf8mb4_unicode_ci
`path` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uq_newcategories_unique` (`parent_id`,`brand_region_id`,`catalog_id`,`full_code`)
KEY `brand_region_id` (`brand_region_id`)
KEY `brand_id` (`brand_id`)
KEY `catalog_id` (`catalog_id`)
KEY `idx_newcategories_level_fullcode` (`level`,`full_code`(50))
KEY `idx_nc_catalog_brand_level` (`catalog_id`,`brand_id`,`level`)
KEY `idx_nc_full_code` (`full_code`)
KEY `idx_nc_spec_key` (`catalog_id`,`spec_key`,`level`)
CONSTRAINT `fk_nc_brand` FOREIGN KEY (`brand_id`) REFERENCES `brands` (`id`)
CONSTRAINT `fk_nc_brand_region` FOREIGN KEY (`brand_region_id`) REFERENCES `brand_regions` (`id`)
CONSTRAINT `fk_nc_catalog` FOREIGN KEY (`catalog_id`) REFERENCES `catalogs` (`id`)
CONSTRAINT `fk_nc_parent` FOREIGN KEY (`parent_id`) REFERENCES `newcategories` (`id`)

TABLE nissan_credentials
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`email` varchar(255) NOT NULL
`password` varchar(255) NOT NULL
`cookie` text
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
`updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
PRIMARY KEY (`id`)

TABLE note_responses
`id` int NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL
`buyer_note_id` int unsigned DEFAULT NULL
`text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00'
`updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP
PRIMARY KEY (`id`)

TABLE oauth_accounts
`id` int unsigned NOT NULL AUTO_INCREMENT
`user_id` int unsigned NOT NULL
`provider_id` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL
`provider` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `oauth_accounts_user_id_index` (`user_id`)
KEY `oauth_accounts_provider_provider_id_index` (`provider`,`provider_id`)

TABLE operator_roles
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`name` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`section` text COLLATE utf8mb4_unicode_ci
PRIMARY KEY (`id`)

TABLE operators
`id` int unsigned NOT NULL AUTO_INCREMENT
`name` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`email` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`phone` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`role_id` int NOT NULL DEFAULT '0'
`photo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`password` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`status` tinyint NOT NULL DEFAULT '1'
`remember_token` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`email_token` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
`shop_name` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
PRIMARY KEY (`id`)
UNIQUE KEY `admins_email_unique` (`email`)

TABLE part_periods_r50gl
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`part_id` bigint unsigned NOT NULL
`begin_date` date NOT NULL
`end_date` date DEFAULT NULL
PRIMARY KEY (`id`)
KEY `idx_pp_dates_r50gl` (`begin_date`,`end_date`)

TABLE part_spec_group_items_r50gl
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`group_id` bigint unsigned NOT NULL
`specification_item_id` bigint unsigned NOT NULL
PRIMARY KEY (`id`)
KEY `idx_psgi_group_id_r50gl` (`group_id`)
KEY `idx_psgi_spec_item_r50gl` (`specification_item_id`)

TABLE part_spec_groups_r50gl
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`part_id` bigint unsigned NOT NULL
`section_id` bigint unsigned NOT NULL
`catalog_id` bigint unsigned NOT NULL
`category_id` bigint unsigned NOT NULL
`group_index` int NOT NULL
`part_period_id` bigint unsigned DEFAULT NULL
PRIMARY KEY (`id`)
KEY `idx_psg_part_section_catalog_r50gl` (`part_id`,`section_id`,`catalog_id`)
KEY `idx_psg_section_catalog_r50gl` (`section_id`,`catalog_id`)
KEY `idx_psg_period_r50gl` (`part_period_id`)

TABLE parts_r50gl
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`part_number` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`label_en` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`label_ar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`qty` int DEFAULT '1'
`callout` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `unique_part` (`part_number`,`label_en`,`qty`,`callout`)
KEY `idx_part_number` (`part_number`(50))
KEY `idx_callout` (`callout`(50))
KEY `idx_label_en` (`label_en`(100))
KEY `idx_label_ar` (`label_ar`(100))
KEY `idx_part_callout` (`part_number`(50),`callout`(50))

TABLE parts_y61gl
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`part_number` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`label_en` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`label_ar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`qty` int DEFAULT '1'
`callout` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `unique_part` (`part_number`,`label_en`,`qty`,`callout`)
KEY `idx_p_callout` (`callout`)
KEY `idx_part_number` (`part_number`(50))
KEY `idx_callout` (`callout`(50))
KEY `idx_label_en` (`label_en`(100))
KEY `idx_label_ar` (`label_ar`(100))
KEY `idx_part_callout` (`part_number`(50),`callout`(50))

TABLE platform_revenue_log
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`date` date NOT NULL
`source` enum('commission','tax','shipping_markup','courier_fee','other') COLLATE utf8mb4_unicode_ci NOT NULL
`reference_type` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`reference_id` bigint unsigned DEFAULT NULL
`amount` decimal(12,2) NOT NULL
`description` text COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `platform_revenue_log_date_index` (`date`)
KEY `platform_revenue_log_source_index` (`source`)

TABLE publications
`id` int unsigned NOT NULL AUTO_INCREMENT
`category_id` int NOT NULL
`name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL
`slug` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`details` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`photo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`source` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`views` int NOT NULL DEFAULT '0'
`status` tinyint NOT NULL DEFAULT '1'
`meta_tag` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`meta_description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`tags` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE purchase_timelines
`id` int NOT NULL AUTO_INCREMENT
`purchase_id` int NOT NULL
`name` text
`text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE purchases
`id` int NOT NULL AUTO_INCREMENT
`user_id` int DEFAULT NULL
`cart` json NOT NULL
`method` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`shipping` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`totalQty` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`pay_amount` double NOT NULL
`txnid` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`charge_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`purchase_number` varchar(255) NOT NULL
`payment_status` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'Pending'
`customer_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`customer_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL
`customer_country` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`customer_phone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`customer_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`customer_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`customer_zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`customer_latitude` decimal(10,7) DEFAULT NULL
`customer_longitude` decimal(10,7) DEFAULT NULL
`shipping_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`shipping_country` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`shipping_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`shipping_phone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`shipping_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`shipping_city` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`shipping_zip` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL
`purchase_note` text
`discount_code` varchar(191) DEFAULT NULL
`discount_amount` varchar(191) DEFAULT NULL
`status` enum('pending','processing','completed','declined','on delivery') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'pending'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
`affilate_user` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`affilate_charge` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`currency_sign` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`currency_name` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`currency_value` double NOT NULL
`shipping_cost` double NOT NULL DEFAULT '0'
`tax` double NOT NULL
`tax_location` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`pay_id` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`merchant_shipping_id` text
`merchant_packing_id` text
`merchant_ids` varchar(255) DEFAULT NULL
`wallet_price` double NOT NULL DEFAULT '0'
`is_shipping` tinyint NOT NULL DEFAULT '1'
`shipping_title` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`customer_shipping_choice` json DEFAULT NULL COMMENT 'Customer selected shipping company data per vendor'
`shipping_status` json DEFAULT NULL COMMENT 'Shipping status per vendor with tracking info'
`packing_name` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`customer_state` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`shipping_state` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`discount` int NOT NULL DEFAULT '0'
`affilate_users` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`commission` double NOT NULL DEFAULT '0'
`couriers` text
PRIMARY KEY (`id`)

TABLE quality_brands
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`name_en` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`name_ar` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`logo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`country` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`website` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`is_active` tinyint(1) NOT NULL DEFAULT '1'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uq_quality_brands_code` (`code`)

TABLE referral_commissions
`id` bigint NOT NULL AUTO_INCREMENT
`refer_id` int NOT NULL
`bonus` double NOT NULL DEFAULT '0'
`type` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL
`user_id` int NOT NULL
`customer_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE section_parts_r50gl
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`section_id` bigint unsigned NOT NULL
`part_id` bigint unsigned NOT NULL
`category_id` bigint unsigned NOT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `unique_section_part` (`section_id`,`part_id`,`category_id`)
KEY `idx_sp_section_part_r50gl` (`section_id`,`part_id`)
KEY `idx_sp_part_id_r50gl` (`part_id`)

TABLE section_parts_y61gl
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`section_id` bigint unsigned NOT NULL
`part_id` bigint unsigned NOT NULL
`category_id` bigint unsigned NOT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `unique_section_part` (`section_id`,`part_id`,`category_id`)
KEY `idx_part_id` (`part_id`)
KEY `idx_section_id` (`section_id`)
KEY `idx_section_part` (`section_id`,`part_id`)

TABLE sections
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`catalog_id` bigint unsigned NOT NULL
`category_id` bigint unsigned DEFAULT NULL
`code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`full_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`formatted_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `catalog_id` (`catalog_id`,`code`)
KEY `category_id` (`category_id`)
KEY `idx_sections_full_code` (`full_code`)
KEY `idx_sections_id_code` (`id`,`full_code`)
KEY `idx_sections_id_full_code` (`id`,`full_code`)
KEY `idx_sections_category_catalog` (`category_id`,`catalog_id`)
KEY `idx_sections_full_code_catalog` (`full_code`,`catalog_id`)
CONSTRAINT `sections_ibfk_1` FOREIGN KEY (`catalog_id`) REFERENCES `catalogs` (`id`) ON DELETE CASCADE
CONSTRAINT `sections_ibfk_2` FOREIGN KEY (`category_id`) REFERENCES `newcategories` (`id`) ON DELETE SET NULL

TABLE seotools
`id` int unsigned NOT NULL AUTO_INCREMENT
`google_analytics` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`gtm_id` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`search_console_verification` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`bing_verification` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`facebook_pixel` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`meta_keys` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`meta_description` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
PRIMARY KEY (`id`)

TABLE settings
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`site_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`site_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`logo` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`phone` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`address` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE settlement_batches
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`batch_ref` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'Unique batch reference: SET-20260113-XXXXX'
`from_party_id` bigint unsigned NOT NULL
`to_party_id` bigint unsigned NOT NULL
`total_amount` decimal(12,2) NOT NULL
`currency` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'SAR'
`payment_method` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'bank_transfer, cash, wallet, etc'
`payment_reference` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'Bank transfer ref, cheque number, etc'
`notes` text COLLATE utf8mb4_unicode_ci
`status` enum('draft','pending','completed','cancelled') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'draft'
`settlement_date` date DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
`created_by` bigint unsigned DEFAULT NULL
`approved_by` bigint unsigned DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `settlement_batches_batch_ref_unique` (`batch_ref`)
KEY `settlement_batches_to_party_id_foreign` (`to_party_id`)
KEY `settlement_batches_from_party_id_to_party_id_index` (`from_party_id`,`to_party_id`)
KEY `settlement_batches_status_index` (`status`)
KEY `settlement_batches_settlement_date_index` (`settlement_date`)
CONSTRAINT `settlement_batches_from_party_id_foreign` FOREIGN KEY (`from_party_id`) REFERENCES `account_parties` (`id`) ON DELETE RESTRICT
CONSTRAINT `settlement_batches_to_party_id_foreign` FOREIGN KEY (`to_party_id`) REFERENCES `account_parties` (`id`) ON DELETE RESTRICT

TABLE shipment_trackings
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`purchase_id` int unsigned NOT NULL
`merchant_id` int unsigned NOT NULL
`shipping_id` int unsigned DEFAULT NULL
`integration_type` enum('api','manual') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'manual'
`provider` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`tracking_number` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`external_shipment_id` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`company_name` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`status` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL
`status_ar` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`status_en` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`message` text COLLATE utf8mb4_unicode_ci
`message_ar` text COLLATE utf8mb4_unicode_ci
`location` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`latitude` decimal(10,7) DEFAULT NULL
`longitude` decimal(10,7) DEFAULT NULL
`occurred_at` timestamp NULL DEFAULT NULL
`source` enum('api','merchant','system','operator') COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'system'
`raw_payload` json DEFAULT NULL
`awb_url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`shipping_cost` decimal(10,2) DEFAULT NULL
`cod_amount` decimal(10,2) DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `shipment_trackings_purchase_id_index` (`purchase_id`)
KEY `shipment_trackings_merchant_id_index` (`merchant_id`)
KEY `shipment_trackings_shipping_id_index` (`shipping_id`)
KEY `shipment_trackings_tracking_number_index` (`tracking_number`)
KEY `shipment_trackings_external_shipment_id_index` (`external_shipment_id`)
KEY `shipment_trackings_status_index` (`status`)
KEY `shipment_trackings_integration_type_index` (`integration_type`)
KEY `shipment_trackings_provider_index` (`provider`)
KEY `shipment_trackings_occurred_at_index` (`occurred_at`)
KEY `shipment_trackings_purchase_id_merchant_id_index` (`purchase_id`,`merchant_id`)
KEY `shipment_trackings_tracking_number_status_index` (`tracking_number`,`status`)

TABLE shippings
`id` int NOT NULL AUTO_INCREMENT
`operator` int NOT NULL DEFAULT '0'
`user_id` int NOT NULL DEFAULT '0'
`integration_type` varchar(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL DEFAULT 'manual'
`provider` varchar(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL
`name` text
`subtitle` text
`price` double NOT NULL DEFAULT '0'
`free_above` double NOT NULL DEFAULT '0'
`status` int NOT NULL DEFAULT '1'
PRIMARY KEY (`id`)
KEY `idx_shippings_provider` (`provider`)

TABLE sku_alternatives
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`part_number` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`group_id` bigint unsigned DEFAULT NULL
`created_at` datetime DEFAULT NULL
`updated_at` datetime DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uniq_sku` (`part_number`)
KEY `idx_group_id` (`group_id`)

TABLE spec_values
`id` int NOT NULL AUTO_INCREMENT
`attribute_id` int DEFAULT NULL
`name` varchar(255) DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE specification_items
`id` int unsigned NOT NULL AUTO_INCREMENT
`specification_id` int unsigned NOT NULL
`catalog_id` bigint unsigned NOT NULL
`value_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`label` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`created_at` datetime DEFAULT CURRENT_TIMESTAMP
`updated_at` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
UNIQUE KEY `unique_spec_value` (`specification_id`,`catalog_id`,`value_id`)
KEY `catalog_id` (`catalog_id`)
KEY `idx_si_id_value` (`id`,`value_id`)
KEY `idx_spec_items_id_value_spec` (`id`,`value_id`,`specification_id`)
KEY `idx_si_catalog_spec` (`catalog_id`,`specification_id`)
CONSTRAINT `specification_items_ibfk_1` FOREIGN KEY (`specification_id`) REFERENCES `specifications` (`id`) ON DELETE CASCADE
CONSTRAINT `specification_items_ibfk_2` FOREIGN KEY (`catalog_id`) REFERENCES `catalogs` (`id`) ON DELETE CASCADE

TABLE specifications
`id` int unsigned NOT NULL AUTO_INCREMENT
`name` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`label` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`type` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `name` (`name`)
KEY `idx_specifications_id_name` (`id`,`name`)

TABLE specs
`id` int NOT NULL AUTO_INCREMENT
`attributable_id` int DEFAULT NULL
`attributable_type` varchar(255) DEFAULT NULL
`name` varchar(255) DEFAULT NULL
`input_name` varchar(255) DEFAULT NULL
`price_status` int NOT NULL DEFAULT '1' COMMENT '0 - hide, 1- show	'
`details_status` int NOT NULL DEFAULT '1' COMMENT '0 - hide, 1- show	'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE static_content
`id` int NOT NULL AUTO_INCREMENT
`name` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`slug` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`details` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`photo` varchar(500) DEFAULT NULL
`meta_tag` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`meta_description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`header` tinyint(1) NOT NULL DEFAULT '0'
`footer` tinyint(1) NOT NULL DEFAULT '0'
PRIMARY KEY (`id`)

TABLE stock_reservations
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`session_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`user_id` bigint unsigned DEFAULT NULL
`merchant_item_id` int unsigned NOT NULL
`size` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`qty` int unsigned NOT NULL DEFAULT '1'
`cart_key` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`reserved_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
`expires_at` timestamp NOT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `stock_reservations_expires_at_merchant_item_id_index` (`expires_at`,`merchant_item_id`)

TABLE support_messages
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`thread_id` bigint unsigned NOT NULL
`message` text COLLATE utf8mb4_unicode_ci NOT NULL
`user_id` int DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `support_messages_thread_id_index` (`thread_id`)
KEY `support_messages_user_id_index` (`user_id`)

TABLE support_threads
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`subject` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL
`user_id` int NOT NULL
`message` text COLLATE utf8mb4_unicode_ci NOT NULL
`type` enum('Ticket','Dispute') COLLATE utf8mb4_unicode_ci DEFAULT NULL
`purchase_number` text COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)
KEY `support_threads_user_id_index` (`user_id`)
KEY `support_threads_type_index` (`type`)

TABLE telescope_entries
`sequence` bigint unsigned NOT NULL AUTO_INCREMENT
`uuid` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`batch_id` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`family_hash` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`should_display_on_index` tinyint(1) NOT NULL DEFAULT '1'
`type` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`content` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`created_at` datetime DEFAULT NULL
PRIMARY KEY (`sequence`)
UNIQUE KEY `telescope_entries_uuid_unique` (`uuid`)
KEY `telescope_entries_batch_id_index` (`batch_id`)
KEY `telescope_entries_family_hash_index` (`family_hash`)
KEY `telescope_entries_created_at_index` (`created_at`)
KEY `telescope_entries_type_should_display_on_index_index` (`type`,`should_display_on_index`)

TABLE telescope_entries_tags
`entry_uuid` char(36) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`tag` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
PRIMARY KEY (`entry_uuid`,`tag`)
KEY `telescope_entries_tags_tag_index` (`tag`)
CONSTRAINT `telescope_entries_tags_entry_uuid_foreign` FOREIGN KEY (`entry_uuid`) REFERENCES `telescope_entries` (`uuid`) ON DELETE CASCADE

TABLE telescope_monitoring
`tag` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
PRIMARY KEY (`tag`)

TABLE testimonials
`id` int unsigned NOT NULL AUTO_INCREMENT
`photo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`name` varchar(191) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`subname` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`details` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
PRIMARY KEY (`id`)

TABLE token_logs
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`type` varchar(50) NOT NULL
`status` varchar(50) NOT NULL
`message` text
`executed_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE tokens
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`accessToken` text NOT NULL
`refreshToken` text NOT NULL
`expires_at` timestamp NOT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE trust_badges
`id` int NOT NULL AUTO_INCREMENT
`user_id` int NOT NULL
`attachments` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`status` enum('Pending','Trusted','Rejected') DEFAULT 'Pending'
`text` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`admin_warning` tinyint(1) NOT NULL DEFAULT '0'
`warning_reason` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE typefaces
`id` int NOT NULL AUTO_INCREMENT
`is_default` tinyint DEFAULT '0'
`font_family` varchar(100) DEFAULT NULL
`font_value` varchar(100) DEFAULT NULL
PRIMARY KEY (`id`)

TABLE user_catalog_events
`id` int NOT NULL AUTO_INCREMENT
`user_id` int NOT NULL
`purchase_number` text
`is_read` tinyint(1) NOT NULL DEFAULT '0'
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
PRIMARY KEY (`id`)

TABLE users
`id` int unsigned NOT NULL AUTO_INCREMENT
`name` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`photo` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`zip` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`city` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`country` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`city_id` int DEFAULT NULL
`address` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`phone` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`fax` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`email` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`password` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`remember_token` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`created_at` timestamp NULL DEFAULT NULL
`updated_at` timestamp NULL DEFAULT NULL
`is_provider` tinyint NOT NULL DEFAULT '0'
`status` tinyint NOT NULL DEFAULT '0'
`verification_link` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`email_verified` enum('Yes','No') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'No'
`affilate_code` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`affilate_income` double NOT NULL DEFAULT '0'
`shop_name_ar` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`shop_name` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`owner_name` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`shop_number` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`shop_address` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`reg_number` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`shop_message` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`shop_details` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`shop_image` varchar(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`merchant_logo` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL
`f_url` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`g_url` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`t_url` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`l_url` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`is_merchant` tinyint(1) NOT NULL DEFAULT '0'
`f_check` tinyint(1) NOT NULL DEFAULT '0'
`g_check` tinyint(1) NOT NULL DEFAULT '0'
`t_check` tinyint(1) NOT NULL DEFAULT '0'
`l_check` tinyint(1) NOT NULL DEFAULT '0'
`mail_sent` tinyint(1) NOT NULL DEFAULT '0'
`shipping_cost` double NOT NULL DEFAULT '0'
`date` date DEFAULT NULL
`ban` tinyint(1) NOT NULL DEFAULT '0'
`balance` double NOT NULL DEFAULT '0'
`email_token` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
PRIMARY KEY (`id`)

TABLE vin_catalog_log
`id` bigint NOT NULL AUTO_INCREMENT
`vin` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`catalog_code` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`matched_by` enum('direct','fallback','manual') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT 'direct'
`confidence_score` decimal(5,2) DEFAULT NULL
`source` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
KEY `idx_vin_catalog` (`vin`)

TABLE vin_decoded_cache
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`vin` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`brand_id` bigint unsigned DEFAULT NULL
`brand_region_id` bigint unsigned DEFAULT NULL
`catalog_id` bigint unsigned DEFAULT NULL
`catalogCode` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`modelCode` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`buildDate` date DEFAULT NULL
`modelBeginDate` date DEFAULT NULL
`modelEndDate` date DEFAULT NULL
`shortName` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`catalogType` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`dataRegion` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`catMarket` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`nmc_vehicleType` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`vin_model_id` bigint unsigned DEFAULT NULL
`raw_json` json DEFAULT NULL
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
UNIQUE KEY `vin` (`vin`)
KEY `idx_catalog_code` (`catalogCode`)
KEY `idx_brand_region` (`brand_id`,`dataRegion`)
KEY `brand_region_id` (`brand_region_id`)
KEY `catalog_id` (`catalog_id`)
KEY `vin_model_id` (`vin_model_id`)
CONSTRAINT `vin_decoded_cache_ibfk_1` FOREIGN KEY (`brand_id`) REFERENCES `brands` (`id`) ON DELETE SET NULL
CONSTRAINT `vin_decoded_cache_ibfk_2` FOREIGN KEY (`brand_region_id`) REFERENCES `brand_regions` (`id`) ON DELETE SET NULL
CONSTRAINT `vin_decoded_cache_ibfk_3` FOREIGN KEY (`catalog_id`) REFERENCES `catalogs` (`id`) ON DELETE SET NULL
CONSTRAINT `vin_decoded_cache_ibfk_4` FOREIGN KEY (`vin_model_id`) REFERENCES `vin_models` (`id`) ON DELETE SET NULL

TABLE vin_models
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`model_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL
`description` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
UNIQUE KEY `model_code` (`model_code`)

TABLE vin_spec_attributes
`id` bigint NOT NULL AUTO_INCREMENT
`vin` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`attribute_code` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`attribute_value` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
PRIMARY KEY (`id`)
KEY `vin_attribute_index` (`vin`,`attribute_code`)
CONSTRAINT `vin_spec_attributes_ibfk_1` FOREIGN KEY (`vin`) REFERENCES `vin_decoded_cache` (`vin`) ON DELETE CASCADE

TABLE vin_spec_mapped
`id` bigint unsigned NOT NULL AUTO_INCREMENT
`vin_id` bigint unsigned NOT NULL
`specification_id` int unsigned NOT NULL
`specification_item_id` int unsigned NOT NULL
`created_at` datetime DEFAULT CURRENT_TIMESTAMP
PRIMARY KEY (`id`)
UNIQUE KEY `unique_vin_spec` (`vin_id`,`specification_id`)
KEY `specification_id` (`specification_id`)
KEY `specification_item_id` (`specification_item_id`)
CONSTRAINT `vin_spec_mapped_ibfk_1` FOREIGN KEY (`vin_id`) REFERENCES `vin_decoded_cache` (`id`) ON DELETE CASCADE
CONSTRAINT `vin_spec_mapped_ibfk_2` FOREIGN KEY (`specification_id`) REFERENCES `specifications` (`id`) ON DELETE CASCADE
CONSTRAINT `vin_spec_mapped_ibfk_3` FOREIGN KEY (`specification_item_id`) REFERENCES `specification_items` (`id`) ON DELETE CASCADE

TABLE vin_spec_to_spec_item
`id` bigint NOT NULL AUTO_INCREMENT
`vin_attribute_id` bigint NOT NULL
`specification_item_id` int unsigned NOT NULL
PRIMARY KEY (`id`)
UNIQUE KEY `uq_vin_spec_map` (`vin_attribute_id`,`specification_item_id`)
KEY `specification_item_id` (`specification_item_id`)
CONSTRAINT `vin_spec_to_spec_item_ibfk_1` FOREIGN KEY (`vin_attribute_id`) REFERENCES `vin_spec_attributes` (`id`) ON DELETE CASCADE
CONSTRAINT `vin_spec_to_spec_item_ibfk_2` FOREIGN KEY (`specification_item_id`) REFERENCES `specification_items` (`id`) ON DELETE CASCADE

TABLE withdraws
`id` int NOT NULL AUTO_INCREMENT
`user_id` int DEFAULT NULL
`method` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`acc_email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`iban` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`country` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`acc_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`address` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`swift` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL
`reference` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
`amount` float DEFAULT NULL
`fee` float DEFAULT '0'
`created_at` datetime DEFAULT NULL
`updated_at` datetime DEFAULT NULL
`status` enum('pending','completed','rejected') NOT NULL DEFAULT 'pending'
`type` enum('user','merchant','rider') NOT NULL
PRIMARY KEY (`id`)

