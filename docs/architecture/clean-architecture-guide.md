# ๐ ุฏููู ุงููุนูุงุฑูุฉ ุงููุธููุฉ

ูุฐุง ุงููุณุชูุฏ ูู ุงููุฑุฌุน ุงูุฑุณูู ููููุท ุงููุนูุงุฑู ุงููุชุจุน ูู ุงููุดุฑูุน. ุงููุฏู ูู ุงูุญูุงุธ ุนูู ููุฏ ูุธููุ ููุธูุ ููุงุจู ููุตูุงูุฉ ุนูู ุงููุฏู ุงูุทููู.

## 1. ุงููุจุงุฏุฆ ุงูุฃุณุงุณูุฉ

ูุญู ูุชุจุน ูุณุฎุฉ ูุจุณุทุฉ ูุนูููุฉ ูู **Clean Architecture**ุ ูุน ุงูุชุฑููุฒ ุนูู ูุตู ุงูุงูุชูุงูุงุช (Separation of Concerns).

### 1.1. ุชุฏูู ุงูุจูุงูุงุช (The Flow)

ูุฌุจ ุฃู ูุชุจุน ุชุฏูู ุงูุจูุงูุงุช ูู ุฃู ุทูุจ (Request) ูุฐุง ุงููุณุงุฑ ุจุดูู ุตุงุฑู:

```mermaid
graph TD
    A[View / API Request] --> B[Controller];
    B --> C[Service];
    C --> D[Model / Repository];
    D --> C;
    C --> B;
    B --> A;
```

- **Controller:** ูุณุชูุจู ุงูุทูุจุ ูุชุญูู ูู ุงููุฏุฎูุงุช ุงูุฃุณุงุณูุฉุ ููุณุชุฏุนู ุงูู Service ุงูููุงุณุจ. **ููููุน** ูุถุน ุฃู Business Logic ููุง.
- **Service:** ูุญุชูู ุนูู ูู ุงูู Business Logic. ููุณู ุจูู ุงูู Modelsุ ูุณุชุฏุนู Services ุฃุฎุฑูุ ููุฌูุฒ ุงูุจูุงูุงุช.
- **Model:** ููุซู ุทุจูุฉ ุงููุตูู ููุจูุงูุงุช (Database). **ููููุน** ูุถุน ุฃู Business Logic ูุนูุฏ ููุง (ุจุงุณุชุซูุงุก Scopes ุงูุจุณูุทุฉ).

### 1.2. ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ

> **ูุง Business Logic ูู Views ุฃู Controllersุ ููุท ูู Services.**

ุฃู ููุฏ ูููู ุจู:
- ุญุณุงุจุงุช ูุนูุฏุฉ
- ุชูุณูู ุจูุงูุงุช
- ุงุชุฎุงุฐ ูุฑุงุฑุงุช ุจูุงุกู ุนูู ุดุฑูุท ูุชุนุฏุฏุฉ
- ุงุณุชุฏุนุงุก Models ูุชุนุฏุฏุฉ

**ูุฌุจ** ุฃู ูููู ุฏุงุฎู Service.

## 2. ููุงูู ุงูุจูุงูุงุช (Data Structures)

### 2.1. DTOs (Data Transfer Objects)

**ุฌููุน** ุงูุจูุงูุงุช ุงูุชู ูุชู ุฅุฑุณุงููุง ูู Controller ุฅูู Viewุ ุฃู ุฅุฑุฌุงุนูุง ูู API Endpointุ **ูุฌุจ** ุฃู ุชููู ุนูู ุดูู DTO.

- **ููุงุฐุงุ** ูุถูุงู ูุฌูุฏ ูุตุฏุฑ ููุญุฏ ููุญูููุฉ (Single Source of Truth) ูุดูู ุจูุงูุงุช ูุชุณู ุนุจุฑ ุฌููุน ุงูููุตุงุช.
- **ุฃููุ** ูุชู ุฅูุดุงุก DTOs ุฏุงุฎู `app/Domain/{Module}/DTOs`.
- **ูููุ** ูุชู ุงุณุชุฎุฏุงู `spatie/laravel-data` ูุฅูุดุงุก DTOs.

**ูุซุงู:** `CatalogItemCardDTO` ูู ุงูุดูู ุงูููุญุฏ ูุนุฑุถ ุฃู ููุชุฌ ูู ุฃู ููุงู.

### 2.2. Models (Eloquent)

- **ููููุน** ุชูุฑูุฑ Eloquent Models ูุจุงุดุฑุฉ ุฅูู Views ุฃู API Responses.
- **ููุงุฐุงุ** ูุฃู ุงูู Models ูุฏ ุชุญุชูู ุนูู ุจูุงูุงุช ุญุณุงุณุฉุ ููุฃู ุดูููุง ูุฏ ูุชุบูุฑุ ููุง ููุณุฑ ุงูู Views.

## 3. ุญูู ุงูุชุจุนูุงุช (Dependency Injection)

**ุฏุงุฆูุงู** ุงุณุชุฎุฏู Constructor Injection ูุญูู ุงูู Services ุฃู ุงูู Classes ุงูุฃุฎุฑู. **ููููุน** ุงุณุชุฎุฏุงู `app()` helper.

**โ ุตุญูุญ:**
```php
class MyController extends Controller
{
    public function __construct(private MyService $myService) {}

    public function index()
    {
        $data = $this->myService->getData();
        // ...
    }
}
```

**โ ุฎุงุทุฆ:**
```php
class MyController extends Controller
{
    public function index()
    {
        $myService = app(MyService::class);
        $data = $myService->getData();
        // ...
    }
}
```

## 4. ุฃูุซูุฉ ุนูููุฉ

### 4.1. ุนุฑุถ ูุงุฆูุฉ ููุชุฌุงุช

1. **Controller:** ูุณุชูุจู ุงูุทูุจุ ูุณุชุฏุนู `CatalogItemApiService::getCatalogItems()`.
2. **Service:** ูููู ุจุงูู Queryุ ูุทุจู ุงูููุงุชุฑุ ููุณุชุฎุฏู `CatalogItemCardDTOBuilder` ูุชุญููู ูู Model ุฅูู DTO.
3. **Controller:** ููุฑุฑ `Collection<CatalogItemCardDTO>` ุฅูู ุงูู View.
4. **View:** ูููู ุจุนูู `foreach` ุนูู ุงูู DTOs ููุนุฑุถ ุงูุญููู ูุจุงุดุฑุฉ (ูุซู `$card->name`, `$card->price`).

### 4.2. ุฅุถุงูุฉ ููุชุฌ ููููุถูุฉ

1. **Controller:** ูุณุชูุจู ุงูุทูุจุ ูุณุชุฏุนู `FavoriteService::add()`.
2. **Service:** ูููู ุจุงูุชุญูู ูู ุงูุดุฑูุทุ ูุญูุธ ูู ุงูู Databaseุ ููุทูู `ProductFavoritedEvent`.
3. **Listener:** ูุณุชูุน ููู Event ููููู ุจุฃู ุนูููุงุช ุฅุถุงููุฉ (ูุซู ุฅุฑุณุงู ุฅุดุนุงุฑ).
